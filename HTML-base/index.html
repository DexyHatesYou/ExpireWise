<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./hover.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/2fd69ec569.js" crossorigin="anonymous"></script>
  <title>ExpireWise</title>
  <link rel="stylesheet" href="index.css">
</head>
<body id="body1">
  <div id="login-part">
    <img class="bgimg" src="./img/bgdrop.png" alt="Background">
    <div class="login-stuff">
      <div class="logoslog">
        <img class="topimg" style="width: 80%;" src="./img/logo.png" alt="Background">
        <p class="g" style="color: #BFCBCE; font-size: 100%">Cook smart, waste less.</p>
      </div>
     <div class="buttonLOL" onclick="animateSlide();" style="text-align: center; position: relative; left: 10%; width: 80%; height: 60px; border-radius: 30px; top: 250px; background-color: #7DA7BD;">
      <h3 class="g" style="line-height: 50px;font-size: 100%; position: relative; vertical-align: middle; margin-top: 20px; color: white;">START SAVING FOOD NOW</h3>
      <img class="topimg" style="width: 30px; position: relative; top: -35px;" src="./img/down.png" >
     </div>
    </div>
  </div>


  <div class="underScreen">
  
    <div class="text-part" style="color: white;">
      <h1 class="g" style="font-size: 250%;">Log In</h1>
      <div style="width: 60%; height: 3px; background-color: white; position: relative; display: flex; left: 20%; border-radius: 5px;"></div>
      <h5 class="g" style="margin: 10px; font-size: 80%">You are just few clicks away from saving food</h5>
    </div>

    <div class="inputs g">
      <label for="username">Username:</label><br>
      <input type="text" name="username" id="username" class="g" style="padding-left: 10px;"><br><br>
      <label for="password">Password:</label><br>
      <input type="password" name="password" id="password" class="g" style="padding-left: 10px;"><br>

      
      <!--
      <input type="checkbox" name="showPass" onclick="show()">
      -->
      <div class="change" onclick="change()">
        <i class="fa-solid ico fa-eye-slash fa-xl" id="hidden" style="color: #BFCBCE;"></i>
        <i class="fa-solid ico fa-eye fa-xl o0" id="showed" style="color: #BFCBCE; padding-left: 2px;"></i>
      </div><p style="font-size: 20%;"></p>
      <label style="font-size: 75%; text-decoration: underline 2px;" onclick="slideC()" >Need help logging in?</label>

    </div>
    <button class="loginB g" onclick="login()" >LOG IN</button>
<div class="differentor">
    <div style="width: 25%; height: 3px; background-color: white; position: absolute; top: 57%; left: 5%; border-radius: 15px;"></div>
    <g class="g" style="position: absolute; top: 56.3%; font-size: 90%; color: white; text-align: center; width: 100%;">OTHER OPTIONS</g>
    <div style="width: 25%; height: 3px; background-color: white; position: absolute; top: 57%; left: 70%; border-radius: 15px;"></div>
</div>
  <button class="regB g" onclick="openReg()">REGISTER</button>
 
<div class="policy g" onclick="slideA()">
  <p>Agreement policy</p>
</div>
 </div>

<div id="policies" class="polic g">
  <div class="policy-content">
    <p class="polda"><b class="d1d">Q1: What data do you collect, and why?</b><br>
Just the essentials: username, profile settings, ingredients, and their expiration dates. That’s it. No emails, no phone numbers, no blood type. We need this to help you keep track of your fridge chaos, not to blackmail you.
<br><br>
<b class="d1d">Q2: Do you share my data?</b><br>
Absolutely not. Your data stays where it belongs—on our local server. Even if someone asked nicely, the answer’s still no.
<br><br>
<b class="d1d">Q3: Can I delete my account?</b><br>
Yes, and it’s as dramatic as it sounds. Go to Profile, click Settings, click Delete Account, confirm by retyping your username and password, and BAM—it’s gone. Forever. Not archived, not stored, just gone. No going back even if you beg us.
<br><br>
<b class="d1d">Q4: Is this app actually free?</b><br>
Yes! No hidden fees, no “premium unlocks.” It’s free now, and it’ll stay free. Because seriously, its 2024, f*ck paying for basic simple apps.(even if they take long to develop)
<br><br>
<b class="d1d">Q5: Where is my data stored?</b><br>
On a local database we run ourselves. No clouds, no weird third-party deals. Just good old responsible storage.
<br><br>
<b class="d1d">Q6: What happens if the app goes down?</b><br>
It’s a temporary project, so... yeah, it might go down occasionally. When it does, don’t panic—we’ll fix it when we can. Or not. Either way, your data is safe and won't be given out even if the app fully closes.
<br><br>
<b class="d1d">Q7: Can I upload my own recipes?</b><br>
Nope, we keep things clean and safe for all ages. Stick to the premade recipes. Your grandma’s secret soup is safe at home.
<br><br>
<b class="d1d">Q8: Are there ads or sponsors?</b><br>
LOL, no. This is a passion school project, not some ad farm. Enjoy the silence.
<br><br>
<b class="d1d">Q9: Can I use this app for business or to sell my recipes?</b><br>
Nope. Don’t be that guy. Copying, selling, or overall making money off this app is strictly prohibited. Do it, and karma will find you (probably through a fridge full of expired milk).
<br><br>
<b class="d1d">Q10: Are there any restrictions?</b><br>
Just basically Q9 and don’t do anything dumb(including offensive usernames). It’s a free tool for everyone—keep it that way.
<br><br>
<b class="d1d">Q11: I found a bug, what to do?</b><br>
Email us the bug or use github repository and make an issue(we prefer email). You can find the email in Q12.
<br><br>
<b class="d1d">Q12: How do I contact you?</b><br>
For questions, support, or existential crises(please don't, i got one myself), email us at <u class="dark">info@expirewise.eu</u>  We’ll reply when we’re not busy eating leftovers.

</p>
  </div>
  <button class="okay g" onclick="slideB()">OKAY</button>
</div>



<div id="help" class="help g">
  <div class="help-content">
    <p class="polda1"><b class="d1d">Oops, no help here!</b><br><br>
Since we don't track anything, there's no way to recover your account. Just create a new one if you're having trouble logging in. It's all about keeping things simple and secure—just your username and password!
</p>
  </div>
  <button class="okay1 g" onclick="slideD()">OKAY</button>
</div>

<div id="confirm" class="confirm g">
  <div class="help-content">
    <h4 onclick="slideF()" style="top: -4%; right: 5%; position: absolute; color: #7DA7BD;">X</h4>
    <p class="polda1"><b class="d1d" style="font-size: 100%; margin-top: 20px;"><br>Please confirm your password</b><br>
</p>
<input type="password" name="password" id="passConf" class="g" style="padding-left: 10px;">
  </div>
  <button class="okay1 g" onclick="register()">REGISTER</button>
</div>


  <div class="coverAll">
    <i class="fa-solid fa-circle-question fa-xl" style="color: #BFCBCE;" onclick="info()"></i>   
  </div>

  <script>
  var spId = localStorage.getItem("spId");




  async function login() {
            const nickname = document.getElementById("username").value;
            const password = document.getElementById("password").value;

     const response = await fetch('https://expirewise.localto.net/api/login.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: `nickname=${encodeURIComponent(nickname)}&password=${encodeURIComponent(password)}`
            });

            const result = await response.json();

            if (result.status === 'OKAY') {
                // Show an alert with the sessionId
              localStorage.setItem("spId", result.sessionId);
              console.log(spId);
                alert(`Login successful! Your sessionId is: ${result.sessionId}`);

                // Optionally, you can redirect the user to the home page
                window.location.href = 'home.html';
            } else {
                alert(result.message || 'Login failed');
            }
}

    function slideA() {
      document.getElementById("policies").classList.add("slideA");
      document.getElementById("policies").classList.remove("slideB");
    }

    function slideB() {
      document.getElementById("policies").classList.add("slideB");
      document.getElementById("policies").classList.remove("slideA");

    }

        function slideC() {
      document.getElementById("help").classList.add("slideC");
      document.getElementById("help").classList.remove("slideD");
    }

    function slideD() {
      document.getElementById("help").classList.add("slideD");
      document.getElementById("help").classList.remove("slideC");

    }

    function openReg() {
      var nicknameCheck = document.getElementById("username").value;
        var passwordCheck = document.getElementById("password").value;
        if (nicknameCheck.length <= 3 || passwordCheck.length <= 3) {
          alert("Please fill out nickname and password on main page before trying to register");
        } else {
      document.getElementById("confirm").classList.add("slideC");
      document.getElementById("confirm").classList.remove("slideD");
    }
    }


    function slideF() {
      document.getElementById("confirm").classList.add("slideD");
      document.getElementById("confirm").classList.remove("slideC");

    }




    function animateSlide() {
      document.getElementById("login-part").classList.add("slide-up");
    }

    async function register() {
    const nickname = document.getElementById("username").value;
    const password1 = document.getElementById("password").value;
    const password = document.getElementById("passConf").value;


    if (password == password1) {
    const response = await fetch("https://expirewise.localto.net/api/register.php", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
        },
        body: `nicknameCheck=${encodeURIComponent(nickname)}&passwordConf=${encodeURIComponent(password)}`,
    });

    const result = await response.text(); 
    
    if (result.trim() === "Registration successful") {
        alert("Registration successful");
        document.getElementById("body1").classList.add("loadF");
      setTimeout(function() {
        window.location.href = "./home.html";
    }, 500);
    } else {
        alert(result); 
        document.getElementById("confirm").classList.add("slideD");
      document.getElementById("confirm").classList.remove("slideC");
    }
  } else {
    alert("Your passwords dont match");
    document.getElementById("passConf").value = '';
  }
}


    function loadI() {
      document.getElementById("body1").classList.add("loadF");
      setTimeout(function() {
        window.location.href = "./home.html";
    }, 500);
    }
      
      function loadE() {
      document.getElementById("body1").classList.add("load");
      setTimeout(function() {
        window.location.href = "./1st.html";
    }, 800);

    }

    var hidden = true;

    function change() {
      if (hidden == true) {
        document.getElementById("showed").classList.remove("o0");
        document.getElementById("hidden").classList.add("o0");
        hidden = false;
         var x = document.getElementById("password");
    x.type = "text";
      } else if (hidden == false) {
        document.getElementById("showed").classList.add("o0");
        document.getElementById("hidden").classList.remove("o0");
        hidden = true;
        var x = document.getElementById("password");
    x.type = "password";
      }


    }

  </script>
</body>
</html>
